<mat-toolbar>
    <mat-toolbar-row>
        <div class="left-buttons">
            <button
            (click)="sidenav.toggle()"
            mat-icon-button>
                <mat-icon>menu</mat-icon>
            </button>
            <button mat-icon-button>
                <mat-icon>favorite</mat-icon>
            </button>
             <button
             (click)="moveToCartPage()" 
             mat-icon-button>
                <mat-icon [matBadge]="noOfCartItems$ | async">shopping_cart</mat-icon>
            </button>
        </div>

        <!-- Profile section aligned to the right -->
        <div class="profile-section">
            @if(currentUser$ | async; as user) {
                <!-- Show profile image if available -->
                @if(user.profileImageUrl) {
                    <img 
                        [src]="user.profileImageUrl" 
                        alt="Profile" 
                        class="profile-image"
                        (click)="navigateToProfile()"/>
                } @else {
                    <button mat-icon-button (click)="navigateToProfile()">
                        <mat-icon>account_circle</mat-icon>
                    </button>
                }
                <button mat-flat-button (click)="logout()">Log out</button>
            } @else {
                <button mat-flat-button (click)="login()">Login</button>
            }
        </div>
    </mat-toolbar-row>
 <mat-toolbar-row>
     <app-search></app-search>
        <mat-chip-set>
            @for(chip of filterChips$ | async;track chip.length ){
                <mat-chip (removed)="removeFilterChip(chip)">{{chip}}
                    <button matChipRemove>
                        <mat-icon>cancel</mat-icon>
                    </button>
                </mat-chip>
            }
        </mat-chip-set>
 </mat-toolbar-row>
</mat-toolbar>
<mat-sidenav-container>
    <mat-sidenav #sidenav><app-side-nav></app-side-nav></mat-sidenav>
    <mat-sidenav-content>
        <div class="allProducts">
            @if(products$ | async; as products){
                @if(products.length>=1){
                    @for(product of products;track product.pid){
                        <app-product [product]="product"/>
                    }
                }
                @else{
                    <p>No such items exist with the filters provided</p>
                }
            }
            @else {
                <mat-spinner></mat-spinner>
            }
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>
<p>home works!</p>
<div *ngIf="currentUser$ |async as user">
    <p>{{user.email}}</p>
    <p>{{user.userId}}</p>
    <p>{{user.userName}}</p>
</div>



